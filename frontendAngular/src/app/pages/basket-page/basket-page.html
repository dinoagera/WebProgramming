<app-navbar></app-navbar>

<div class="basket-page">
  <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
  <div *ngIf="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã...</div>

  <!-- –û—à–∏–±–∫–∞ -->
  <div *ngIf="error && !loading" class="error">{{ error }}</div>

  <!-- –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã -->
  <div *ngIf="!loading && !error">
    <div *ngIf="basketData as data">
      <div class="basket-header">
        <h1>–ö–û–†–ó–ò–ù–ê / {{ data.cart.items.length || 0 }} –®–¢.</h1>
      </div>

      <div class="basket-content">
        <div class="basket-items">
          <div *ngFor="let item of data.cart.items" class="basket-item">
            <div class="item-details">
              <p class="item-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ item.category }}</p>
              <div class="item-price">–¶–µ–Ω–∞: {{ item.price | number }} ‚ÇΩ</div>
              <div>–ö–æ–ª-–≤–æ: {{ item.quantity }} —à—Ç.</div>
            </div>
            <div class="item-actions">
              <button class="btn-remove" (click)="removeItem(item)">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
            <button (click)="updateItem(item.product_id, 1)">+</button>
            <button (click)="updateItem(item.product_id, 0)">-</button>
          </div>
        </div>

        <div class="basket-summary">
          <div class="summary-header">
            <h2>–ò–¢–û–ì–ò</h2>
          </div>
          <div class="summary-body">
            <div class="summary-row">
              <span>–°—É–º–º–∞ —Ç–æ–≤–∞—Ä–æ–≤</span>
              <span>{{ data.cart.total | number }} ‚ÇΩ</span>
            </div>
            <div class="summary-row">
              <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏</span>
              <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            </div>
            <div class="summary-row total">
              <strong>–ò–¢–û–ì–û –ö –û–ü–õ–ê–¢–ï</strong>
              <strong>{{ data.cart.total | number }} ‚ÇΩ</strong>
            </div>
            <button class="btn-pay" (click)="checkout()">–û–ü–õ–ê–¢–ò–¢–¨ –ó–ê–ö–ê–ó</button>
          </div>
          <button
              class="clear-cart-button"
              (click)="clearCart()"
            >
              –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
          </button>
        </div>
      </div>
    </div>


    <!-- basketData === null, –Ω–æ –æ—à–∏–±–∫–∏ –Ω–µ—Ç ‚Üí –ø—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
<!-- –ù–∞ —ç—Ç–æ: -->
      <div *ngIf="!basketData" class="empty-basket-message">
        <div class="empty-icon">üõí</div>
        <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</p>
      </div>
  </div>
</div>

<app-footer></app-footer>